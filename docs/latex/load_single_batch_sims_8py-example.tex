\hypertarget{load_single_batch_sims_8py-example}{}\section{load\+\_\+single\+\_\+batch\+\_\+sims.\+py}

\begin{DoxyCodeInclude}{0}
\end{DoxyCodeInclude}
 Example of how to load and plot results from a single batch within an ensemble. Additionally, simulation diagnostics are also loaded and plotted. See the S\+E\+T\+UP section Adjust \textquotesingle{}batch\+\_\+num\textquotesingle{} to select the desired batch to load within the ensemble folder


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{2 }
\DoxyCodeLine{8 }
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{keyword}{import} os.path}
\DoxyCodeLine{11 \textcolor{keyword}{import} sys}
\DoxyCodeLine{12 sys.path.append(os.path.join(os.path.dirname(\_\_file\_\_), \textcolor{stringliteral}{'..'}))}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{import} os}
\DoxyCodeLine{15 \textcolor{keyword}{import} pandas \textcolor{keyword}{as} pd}
\DoxyCodeLine{16 \textcolor{keyword}{import} numpy \textcolor{keyword}{as} np}
\DoxyCodeLine{17 \textcolor{keyword}{import} matplotlib.pyplot \textcolor{keyword}{as} plt}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{from} DOT\_assignment \textcolor{keyword}{import} post\_process}
\DoxyCodeLine{20 \textcolor{keyword}{from} DOT\_assignment \textcolor{keyword}{import} log}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{"\_\_main\_\_"}:}
\DoxyCodeLine{23 }
\DoxyCodeLine{24     \textcolor{comment}{\# get list of ensemble tests}}
\DoxyCodeLine{25     \textcolor{comment}{\# ensembles = [x[0] for x in os.walk('./test\_results')]}}
\DoxyCodeLine{26     ensembles = [x[0] \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} os.walk(\textcolor{stringliteral}{'./'})]}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{comment}{\# SETUP}}
\DoxyCodeLine{29 \textcolor{comment}{\# .\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{comment}{\# loads desired batches within a single ensemble which the user specifies}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     dim = 3}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     nagents = 5}
\DoxyCodeLine{36     ntargets = 5}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{comment}{\#     agent\_model = 'Double\_Integrator'}}
\DoxyCodeLine{39 \textcolor{comment}{\#     target\_model = 'Double\_Integrator'}}
\DoxyCodeLine{40 \textcolor{comment}{\#     ensemble\_name = 'ensemble\_0\_'+str(dim)+'D\_'+str(nagents)+'v'+str(ntargets)+'\_'+\(\backslash\)}}
\DoxyCodeLine{41 \textcolor{comment}{\#             'identical\_'+agent\_model+'\_LQR\_LQR\_2019\_07\_31\_14\_06\_36'}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     agent\_model = \textcolor{stringliteral}{'Linearized\_Quadcopter'}}
\DoxyCodeLine{44     target\_model = \textcolor{stringliteral}{'Linearized\_Quadcopter'}}
\DoxyCodeLine{45     ensemble\_name = \textcolor{stringliteral}{'ensemble\_0\_'}+str(dim)+\textcolor{stringliteral}{'D\_'}+str(nagents)+\textcolor{stringliteral}{'v'}+str(ntargets)+\textcolor{stringliteral}{'\_'}+\(\backslash\)}
\DoxyCodeLine{46             \textcolor{stringliteral}{'identical\_'}+agent\_model+\textcolor{stringliteral}{'\_LQR\_LQR\_2019\_08\_22\_16\_47\_21'}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     root\_directory = \textcolor{stringliteral}{'/Users/koray/Documents/GradSchool/research/gorodetsky/draper/devspace/targetingmdp/'}}
\DoxyCodeLine{49     ensemble\_directory = root\_directory + ensemble\_name}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{comment}{\# .\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{comment}{\# get number of batches}}
\DoxyCodeLine{54     batch\_dirs = [x[0] \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} os.walk(ensemble\_directory)]}
\DoxyCodeLine{55     nbatches = len(batch\_dirs[1:])}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{comment}{\# load batches and plot}}
\DoxyCodeLine{58     sim\_name\_list = [\textcolor{stringliteral}{'AssignmentDyn'}, \textcolor{stringliteral}{'AssignmentEMD'}]}
\DoxyCodeLine{59 }
\DoxyCodeLine{60     \textcolor{comment}{\# \# load and plot every batch within ensemble}}
\DoxyCodeLine{61     \textcolor{comment}{\# for ii in range(nbatches):}}
\DoxyCodeLine{62     \textcolor{comment}{\#     batch\_name = 'batch\_\{0\}'.format(ii)}}
\DoxyCodeLine{63     \textcolor{comment}{\#     loaded\_batch = log.load\_batch\_metrics(ensemble\_directory, batch\_name, sim\_name\_list)}}
\DoxyCodeLine{64     \textcolor{comment}{\#     post\_process.plot\_batch\_performance\_metrics(loaded\_batch)}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \textcolor{comment}{\# load and plot a specific batch}}
\DoxyCodeLine{67     batch\_num = 0}
\DoxyCodeLine{68     batch\_name = \textcolor{stringliteral}{'batch\_\{0\}'}.format(batch\_num)}
\DoxyCodeLine{69     loaded\_batch = log.load\_batch\_metrics(ensemble\_directory, batch\_name, sim\_name\_list)}
\DoxyCodeLine{70     post\_process.plot\_batch\_performance\_metrics(loaded\_batch)}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     \textcolor{comment}{\# \# cost histogram}}
\DoxyCodeLine{73     \textcolor{comment}{\# ensemble\_metrics = []}}
\DoxyCodeLine{74     \textcolor{comment}{\# for ii in range(nbatches):}}
\DoxyCodeLine{75     \textcolor{comment}{\#     batch\_name = 'batch\_\{0\}'.format(ii)}}
\DoxyCodeLine{76     \textcolor{comment}{\#     loaded\_batch = log.load\_batch\_metrics(ensemble\_directory, batch\_name, sim\_name\_list)}}
\DoxyCodeLine{77     \textcolor{comment}{\#     ensemble\_metrics.append(loaded\_batch)}}
\DoxyCodeLine{78     \textcolor{comment}{\# post\_process.plot\_ensemble\_histograms(ensemble\_metrics)}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     \textcolor{comment}{\# \# ensemble metrics 2 - save ensemble [dyn final costs, emd final\_cost, switches]}}
\DoxyCodeLine{81     \textcolor{comment}{\# ensemble\_metrics = []}}
\DoxyCodeLine{82     \textcolor{comment}{\# for ii in range(nbatches):}}
\DoxyCodeLine{83     \textcolor{comment}{\#     batch\_name = 'batch\_\{0\}'.format(ii)}}
\DoxyCodeLine{84     \textcolor{comment}{\#     loaded\_batch = log.load\_batch\_metrics(ensemble\_directory, batch\_name, sim\_name\_list)}}
\DoxyCodeLine{85     \textcolor{comment}{\#     ensemble\_metrics.append(loaded\_batch)}}
\DoxyCodeLine{86     \textcolor{comment}{\# post\_process.save\_ensemble\_metrics(ensemble\_metrics, ensemble\_name)}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     }
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{comment}{\# load and plot a specific batch}}
\DoxyCodeLine{91     batch\_num = 0}
\DoxyCodeLine{92     batch\_name = \textcolor{stringliteral}{'batch\_\{0\}'}.format(batch\_num)}
\DoxyCodeLine{93     loaded\_batch\_diagnostics = log.load\_batch\_diagnostics(ensemble\_directory, batch\_name, sim\_name\_list)}
\DoxyCodeLine{94     post\_process.plot\_batch\_diagnostics(loaded\_batch\_diagnostics)}
\DoxyCodeLine{95 }
\DoxyCodeLine{96     \textcolor{comment}{\# \# diagnostics}}
\DoxyCodeLine{97     \textcolor{comment}{\# ensemble\_diagnostics = []}}
\DoxyCodeLine{98     \textcolor{comment}{\# for ii in range(nbatches):}}
\DoxyCodeLine{99     \textcolor{comment}{\#     batch\_name = 'batch\_\{0\}'.format(ii)}}
\DoxyCodeLine{100     \textcolor{comment}{\#     loaded\_batch\_diagnostics = log.load\_batch\_diagnostics(ensemble\_directory, batch\_name, sim\_name\_list)}}
\DoxyCodeLine{101     \textcolor{comment}{\#     ensemble\_diagnostics.append(loaded\_batch\_diagnostics)}}
\DoxyCodeLine{102     \textcolor{comment}{\# post\_process.plot\_ensemble\_diagnostics(ensemble\_diagnostics)}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     print(\textcolor{stringliteral}{'finished plotting!'})}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     plt.show()}
\DoxyCodeLine{107     print(\textcolor{stringliteral}{'done!'})}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 }
\DoxyCodeLine{110 }
\end{DoxyCodeInclude}
 